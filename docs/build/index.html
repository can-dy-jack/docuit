<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>title</title>
    <meta name="description" content="xxx">
  </head>
  <body>
    <div id="root"><div><div><p>0</p><button>count</button></div>
<h1 id="gfm"><a class="header-anchor" href="#gfm">#</a>GFM</h1>
<h2 id="autolink"><a class="header-anchor" href="#autolink">#</a>Autolink</h2>
<p>literals <a href="http://www.example.com">www.example.com</a>, <a href="https://example.com">https://example.com</a>, and <a href="mailto:contact@example.com">contact@example.com</a>.</p>
<h2 id="代码高亮"><a class="header-anchor" href="#代码高亮">#</a>代码高亮</h2>
<div class="language-js"><span class="lang">js</span><pre class="shiki light-plus" style="background-color:#FFFFFF" tabindex="0"><code><span class="line"><span style="color:#AF00DB">export</span><span style="color:#000000"> </span><span style="color:#0000FF">async</span><span style="color:#000000"> </span><span style="color:#0000FF">function</span><span style="color:#000000"> </span><span style="color:#795E26">build</span><span style="color:#000000">(</span><span style="color:#001080">root</span><span style="color:#000000">: </span><span style="color:#267F99">string</span><span style="color:#000000"> = </span><span style="color:#001080">process</span><span style="color:#000000">.</span><span style="color:#795E26">cwd</span><span style="color:#000000">(), </span><span style="color:#001080">config</span><span style="color:#000000">: </span><span style="color:#267F99">SiteConfig</span><span style="color:#000000">) {</span></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#008000">// 1. bundle - client 端 + server 端</span></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#0000FF">const</span><span style="color:#000000"> [</span><span style="color:#0070C1">clientBundle</span><span style="color:#000000">] = </span><span style="color:#AF00DB">await</span><span style="color:#000000"> </span><span style="color:#795E26">bundle</span><span style="color:#000000">(</span><span style="color:#001080">root</span><span style="color:#000000">, </span><span style="color:#001080">config</span><span style="color:#000000">);</span></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#008000">// 2. 引入 server-entry 模块</span></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#0000FF">const</span><span style="color:#000000"> </span><span style="color:#0070C1">serverEntryPath</span><span style="color:#000000"> = </span><span style="color:#001080">path</span><span style="color:#000000">.</span><span style="color:#795E26">join</span><span style="color:#000000">(</span><span style="color:#001080">root</span><span style="color:#000000">, </span><span style="color:#A31515">&#x27;.temp&#x27;</span><span style="color:#000000">, </span><span style="color:#A31515">&#x27;ssr-entry.js&#x27;</span><span style="color:#000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#001080">console</span><span style="color:#000000">.</span><span style="color:#795E26">log</span><span style="color:#000000">(</span><span style="color:#001080">serverEntryPath</span><span style="color:#000000">);</span></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#0000FF">const</span><span style="color:#000000"> { </span><span style="color:#0070C1">render</span><span style="color:#000000"> } = </span><span style="color:#AF00DB">await</span><span style="color:#000000"> </span><span style="color:#0000FF">import</span><span style="color:#000000">(</span><span style="color:#A31515">&#x27;file://&#x27;</span><span style="color:#000000"> + </span><span style="color:#001080">serverEntryPath</span><span style="color:#000000">); </span><span style="color:#008000">// &#x27;file://&#x27;   ???</span></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#008000">// 3. 服务端渲染，产出 HTML</span></span>
<span class="line"><span style="color:#000000">  </span><span style="color:#AF00DB">try</span><span style="color:#000000"> {</span></span>
<span class="line"><span style="color:#000000">    </span><span style="color:#AF00DB">await</span><span style="color:#000000"> </span><span style="color:#795E26">renderPage</span><span style="color:#000000">(</span><span style="color:#001080">render</span><span style="color:#000000">, </span><span style="color:#001080">root</span><span style="color:#000000">, </span><span style="color:#001080">clientBundle</span><span style="color:#000000">);</span></span>
<span class="line"><span style="color:#000000">  } </span><span style="color:#AF00DB">catch</span><span style="color:#000000"> (</span><span style="color:#001080">e</span><span style="color:#000000">) {</span></span>
<span class="line"><span style="color:#000000">    </span><span style="color:#001080">console</span><span style="color:#000000">.</span><span style="color:#795E26">log</span><span style="color:#000000">(</span><span style="color:#A31515">&#x27;Render page error.</span><span style="color:#EE0000">\n</span><span style="color:#A31515">&#x27;</span><span style="color:#000000">, </span><span style="color:#001080">e</span><span style="color:#000000">);</span></span>
<span class="line"><span style="color:#000000">  }</span></span>
<span class="line"><span style="color:#000000">}</span></span>
<span class="line"></span></code></pre></div>
<h2 id="footer"><a class="header-anchor" href="#footer">#</a>Footer</h2>
<p><del>删除</del></p></div></div>
    <script type="module" src="/assets/client-entry-477073e5.js"></script>
  </body>
</html>